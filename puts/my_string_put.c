/* ************************************************************************** */
/*                                                                            */
/*                                                        :::      ::::::::   */
/*   my_string_put.c                                    :+:      :+:    :+:   */
/*                                                    +:+ +:+         +:+     */
/*   By: topiana- <topiana-@student.42.fr>          +#+  +:+       +#+        */
/*                                                +#+#+#+#+#+   +#+           */
/*   Created: 2025/06/19 13:55:15 by topiana-          #+#    #+#             */
/*   Updated: 2025/06/19 23:28:16 by topiana-         ###   ########.fr       */
/*                                                                            */
/* ************************************************************************** */

#include "cub3D.h"

typedef struct s_draw_map
{
	char	letter;
	int		pixel[24][2];
}				t_draw_map;

void	my_string_put(void *my_struct, int x, int y, const char *string, unsigned int color);

/* one letter is 6x6 */
static t_draw_map get_maiusc_letter(const char letter)
{
	const t_draw_map empty = {letter, {{-1,-1}}};
	static const t_draw_map alphabet[26] = {
		{'A', {{1,0},{2,0},{0,1},{3,1},{0,2},{1,3},{2,3},{3,2},{0,3},{3,3},{0,4},{3,4},{0,5},{3,5},{-1,-1}}},
		{'B', {{0,0},{1,0},{2,0},{0,1},{3,1},{0,2},{2,2},{1,2},{0,3},{3,3},{0,4},{3,4},{0,5},{1,5},{2,5},{-1,-1}}},
		{'C', {{1,0},{2,0},{3,0},{0,1},{0,2},{0,3},{0,4},{1,5},{2,5},{3,5},{-1,-1}}},
		{'D', {{0,0},{1,0},{2,0},{0,1},{3,1},{0,2},{3,2},{0,3},{3,3},{0,4},{3,4},{0,5},{1,5},{2,5},{-1,-1}}},
		{'E', {{0,0},{1,0},{2,0},{3,0},{0,1},{0,2},{1,2},{2,2},{3,2},{0,3},{0,4},{0,5},{1,5},{2,5},{3,5},{-1,-1}}},
		{'F', {{0,0},{1,0},{2,0},{3,0},{0,1},{0,2},{1,2},{2,2},{3,2},{0,3},{0,4},{0,5},{-1,-1}}},
		{'G', {{1,0},{2,0},{3,0},{0,1},{0,2},{0,3},{2,3},{3,3},{0,4},{3,4},{1,5},{2,5},{-1,-1}}},
		{'H', {{0,0},{0,1},{0,2},{0,3},{0,4},{0,5},{3,0},{3,1},{3,2},{3,3},{3,4},{3,5},{1,3},{2,3},{-1,-1}}},
		{'I', {{1,0},{2,0},{3,0},{2,1},{2,2},{2,3},{2,4},{1,5},{2,5},{3,5},{-1,-1}}},
		{'J', {{1,0},{2,0},{3,0},{2,1},{2,2},{2,3},{2,4},{0,5},{1,5},{2,5},{-1,-1}}},
		{'K', {{0,0},{0,1},{0,2},{0,3},{0,4},{0,5},{1,3},{2,2},{3,1},{3,4},{3,5},{-1,-1}}},
		{'L', {{0,0},{0,1},{0,2},{0,3},{0,4},{0,5},{1,5},{2,5},{3,5},{-1,-1}}},
		{'M', {{0,0},{3,0},{0,1},{1,1},{2,1},{3,1},{0,2},{3,2},{0,3},{3,3},{0,4},{3,4},{0,5},{3,5},{-1,-1}}},
		{'N', {{0,0},{3,0},{0,1},{1,1},{3,1},{0,2},{2,2},{3,2},{0,3},{3,3},{0,4},{3,4},{0,5},{3,5},{-1,-1}}},
		{'O', {{1,0},{2,0},{0,1},{0,2},{0,3},{0,4},{1,5},{2,5},{3,1},{3,2},{3,3},{3,4},{-1,-1}}},
		{'P', {{0,0},{1,0},{2,0},{3,0},{0,1},{3,1},{0,2},{3,2},{0,3},{1,3},{2,3},{0,4},{0,5},{-1,-1}}},
		{'Q', {{1,0},{2,0},{0,1},{3,1},{0,2},{3,2},{0,3},{3,3},{1,4},{2,4},{2,5},{3,5},{-1,-1}}},
		{'R', {{0,0},{1,0},{2,0},{3,0},{0,1},{3,1},{0,2},{3,2},{0,3},{1,3},{2,3},{3,4},{0,4},{0,5},{3,5},{-1,-1}}},
		{'S', {{1,0},{2,0},{3,0},{0,1},{0,2},{1,2},{2,2},{3,3},{3,4},{0,5},{1,5},{2,5},{-1,-1}}},
		{'T', {{0,0},{1,0},{2,0},{3,0},{4,0},{2,1},{2,2},{2,3},{2,4},{2,5},{-1,-1}}},
		{'U', {{0,0},{3,0},{0,1},{3,1},{0,2},{3,2},{0,3},{3,3},{0,4},{3,4},{1,5},{2,5},{-1,-1}}},
		{'V', {{0,0},{4,0},{0,1},{4,1},{0,2},{4,2},{1,3},{3,3},{1,4},{3,4},{2,5},{-1,-1}}},
		{'W', {{0,0},{4,0},{0,1},{4,1},{0,2},{4,2},{0,3},{4,3},{0,4},{4,4},{1,5},{3,5},{2,2},{2,3},{2,4},{-1,-1}}},
		{'X', {{1,0},{1,1},{2,2},{3,3},{4,4},{4,5},{1,5},{1,4},{2,3},{3,2},{4,1},{4,0},{-1,-1}}},
		{'Y', {{0,0},{4,0},{1,1},{3,1},{2,2},{2,3},{2,4},{2,5},{-1,-1}}},
		{'Z', {{0,0},{1,0},{2,0},{3,0},{3,1},{2,2},{1,3},{0,4},{0,5},{1,5},{2,5},{3,5},{-1,-1}}}
	};

	if (letter < 'A' || letter > 'Z')
		return (empty);
	return (alphabet[letter - 'A']);
}

static void	put_2by2_square(void *my_struct, int x, int y, unsigned int color)
{
	t_img *const	img = (t_img *)my_struct;
	const int		bpp = img->bits_per_pixel / sizeof(int *);
	int				t;
	int				s;

	if (my_struct == NULL
		|| img->addr == NULL)
		return ;
	t = 0;
	while (t < 2)
	{
		s = 0;
		while (s < 2)
		{
			if (x + t >= 0 && y + s >= 0
				&& x + t < img->width && y + s < img->heigth)
				*(unsigned int *)(img->addr + ((y + s) * img->line_length
							+ (x + t) * bpp)) = color;
			s++;
		}
		t++;
	}
}

static void	draw_letter(void *my_struct, int x, int y,
	t_draw_map letter, unsigned int color)
{
	int				my_x;
	int				my_y;
	int				i;

	i = 0;
	while (letter.pixel[i][0] != -1)
	{
		my_x = x + letter.pixel[i][0] * 2;
		my_y = y + letter.pixel[i][1] * 2;
		put_2by2_square(my_struct, my_x, my_y, color);
		i++;
	}
}

/* 'a' = 97-97 */
void	my_string_put(void *my_struct, int x, int y,
	const char *string, unsigned int color)
{
	int	i;

	i = 0;
	while (string[i] != '\0')
	{
		draw_letter(my_struct, x, y, get_maiusc_letter(string[i]), color);
		x = x + 12;
		i++;
	}
}
